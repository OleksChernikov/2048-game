var l=document.querySelectorAll(".field-cell"),n=document.querySelector(".game-score"),r=n.innerText,u=document.querySelector(".message-lose"),e=document.querySelector(".message-start"),t=document.querySelector(".message-win"),o=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],a=[[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1]];function f(){l.forEach(function(l,n){var r=o[Math.floor(n/4)][n%4];l.textContent=null!==r?r:"",l.className="field-cell",null!==r&&l.classList.add("field-cell--"+r)})}function i(){var l=[];if(o.forEach(function(n,r){n.forEach(function(n,u){null===n&&l.push({x:u,y:r})})}),l.length>0){var n=l[Math.floor(Math.random()*l.length)];o[n.y][n.x]=.9>Math.random()?2:4,f()}s()}function c(){for(var l=0;l<4;l++)for(var n=0;n<4;n++)a[l][n]=!1}function s(){var u=0;l.forEach(function(l){u+=+l.innerText,r=u}),r=u,n.innerText=r}function d(){for(var l=0;l<4;l++)for(var n=0;n<4;n++)if(null===o[l][n])return!1;for(var r=0;r<4;r++)for(var t=0;t<3;t++)if(o[r][t]===o[r][t+1])return!1;for(var a=0;a<4;a++)for(var f=0;f<3;f++)if(o[f][a]===o[f+1][a])return!1;return e.classList.add("hidden"),u.classList.remove("hidden"),!0}function v(){for(var l=0;l<4;l++)for(var n=0;n<4;n++)if(2048===o[l][n])return e.classList.add("hidden"),t.classList.remove("hidden"),!0}var h=document.querySelector(".button.start");h.addEventListener("click",function(){e.classList.remove("hidden"),u.classList.add("hidden"),o=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],a=[[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!1,!1]],i(),i(),e.classList.add("hidden"),h.classList.remove("start"),h.classList.add("restart"),h.innerText="Restart"}),document.addEventListener("keydown",function(l){var n=l.key;"ArrowUp"===n?function(){c();for(var l=!1,n=0;n<4;n++)for(var r=1;r<4;r++)if(null!==o[r][n]){for(var u=o[r][n],e=r;e>0&&null===o[e-1][n];)e--;e>0&&o[e-1][n]===u&&!a[e-1][n]?(o[e-1][n]*=2,o[r][n]=null,a[e-1][n]=!0,a[e][n]=!1,l=!0):e!==r&&(o[e][n]=u,o[r][n]=null,l=!0)}l&&(i(),f(),d(),v())}():"ArrowDown"===n?function(){c();for(var l=!1,n=0;n<4;n++)for(var r=3;r>=0;r--)if(null!==o[r][n]){for(var u=o[r][n],e=r;e<3&&null===o[e+1][n];)e++;e<3&&o[e+1][n]===u&&!a[e+1][n]?(o[e+1][n]*=2,o[r][n]=null,a[e+1][n]=!0,a[e][n]=!1,l=!0):e!==r&&(o[e][n]=u,o[r][n]=null,l=!0)}l&&(i(),f(),d(),v())}():"ArrowLeft"===n?function(){c();for(var l=!1,n=0;n<4;n++)for(var r=1;r<4;r++)if(null!==o[n][r]){for(var u=o[n][r],e=r;e>0&&null===o[n][e-1];)e--;e>0&&o[n][e-1]===u&&!a[n][e-1]?(o[n][e-1]*=2,o[n][r]=null,a[n][e-1]=!0,a[n][e]=!1,l=!0):e!==r&&(o[n][e]=u,o[n][r]=null,l=!0)}l&&(i(),f(),d(),v())}():"ArrowRight"===n&&function(){c();for(var l=!1,n=0;n<4;n++)for(var r=3;r>=0;r--)if(null!==o[n][r]){for(var u=o[n][r],e=r;e<3&&null===o[n][e+1];)e++;e<3&&o[n][e+1]===u&&!a[n][e+1]?(o[n][e+1]*=2,o[n][r]=null,a[n][e+1]=!0,a[n][e]=!1,l=!0):e!==r&&(o[n][e]=u,o[n][r]=null,l=!0)}l&&(i(),f(),d(),v(),s())}()});
//# sourceMappingURL=index.2b9c996f.js.map
